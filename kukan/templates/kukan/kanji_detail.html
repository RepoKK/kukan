{% extends 'kukan/base_ext.html' %}
{% load my_tags %}

{% load staticfiles %}
{% block title %}
{{ kanji.kanji }}
{% endblock %}

{% block content %}
  <h1 class="title kanji">{{ kanji.kanji }}</h1>
  <div>
    <table class="table">
        <thead>
            <th>
                読み
            </th>
            <th>
                例
            </th>
        </thead>
    {% for reading in kanji.reading_set.all %}
        <tr>
            <td>
                {{reading.get_full|safe}}
            </td>
            <td>
            {{reading.get_list_ex2|safe}}
            </td>
        </tr>
    {% endfor %}
    {% for exmap in kanji.exmap_set.all %}
      {% if not exmap.reading %}
        <tr>
            <td>
                <a href="{% url 'kukan:example_detail' exmap.example.pk %}">{{exmap.example}}</a>
            </td>
            <td>

            </td>
        </tr>
      {% endif %}
    {% endfor %}
    </table>
  </div>
<br>

<div>
      <table class="table">
          <thead>
            <th>
                属性
            </th>
            <th>
                値
            </th>
        </thead>
          <tbody>
          {% for fldname, name, value in kanji.basic_info %}
          <tr>
              <th>
                  {{name}}
              </th>
              <td>
                  {{value}}
              </td>
          </tr>
          {% endfor %}
          </tbody>
      </table>
      <br>
</div>

<br>
<table class="table">
{{kanji.anki_Examples|safe}}
</table>
<br>

<!-- Temporary to allow comparaison with Anki -->


<br>
<table class="table">
{{kanji.anki_Reading_Table|safe}}
</table>
<br>

<br>
<table class="table">
    {% for reading in kanji.reading_set.all|dictsort:'joyo_order' %}
      {% if reading.is_joyo %}
        <tr>
            <td>
                {{reading.get_html_format|safe}}
            </td>
            <td>
                {{reading.get_list_ex_anki|safe}}
                {% if reading.remark %}
                    <br><span class='rem'>{{reading.remark}}</span></td></tr>
                {% elif reading.ijidokun %}
                    <br><span class='rem'>{{reading.ijidokun}}</span></td></tr>

                {% endif %}
            </td>
        </tr>
      {% endif %}
    {% endfor %}
    {% if kanji.jukuji %}
        <tr>
            <td class="C_read C_special" colspan=2>
                {{kanji.get_jukiji|safe}}
            </td>
        </tr>
      {% endif %}
</table>

<div>
      <table class="table">
          <thead>
            <th>
                Anki Name
            </th>
            <th>
                Django model name
            </th>
            <th>
                Value
            </th>
        </thead>
          <tbody>
          {% for fldname, name, value in kanji.basic_info %}
          <tr>
              <th>
                  {{name}}
              </th>
              <td>
                  {{fldname}}
              </td>
              <td>
                  {{value}}
              </td>
          </tr>
          {% endfor %}
          </tbody>
      </table>
      <br>
</div>
{% endblock %}